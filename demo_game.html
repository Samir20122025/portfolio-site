<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üçé Fruit Collector - Mini Game</title>
  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell;
      background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh; display:flex; align-items:center; justify-content:center;
      overflow:hidden; padding:20px;
    }
    .container {position:relative; z-index:10; max-width:600px; width:100%; text-align:center;}
    .game-state {display:none;}
    .game-state.active {display:block; animation:fadeIn .3s ease;}
    @keyframes fadeIn {from{opacity:0; transform:scale(.95);} to{opacity:1; transform:scale(1);} }
    button {
      background:#10b981; color:white; border:none; padding:15px 35px; border-radius:10px;
      font-size:1rem; font-weight:700; cursor:pointer; transition:.3s;
    }
    button:hover {background:#059669; transform:translateY(-2px);}
    button:active {transform:translateY(0);}
    .hud {
      display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:20px;
    }
    .hud-item {
      background:white; border-radius:15px; padding:15px;
      box-shadow:0 10px 25px rgba(0,0,0,.2);
    }
    .hud-label {font-size:.9rem; color:#666; margin-bottom:6px; font-weight:600;}
    .hud-value {font-size:2.2rem; font-weight:900; color:#10b981;}
    #timerValue {color:#3b82f6;}
    #timerValue.warning {color:#ef4444; animation:blink .5s infinite;}
    @keyframes blink {0%,100%{opacity:1;}50%{opacity:.5;}}
    .game-canvas {
      position:relative; width:100%; height:400px; border-radius:15px;
      background:linear-gradient(to bottom,#dbeafe 0%,#e0f2fe 100%);
      overflow:hidden; border:4px solid #93c5fd; box-shadow:0 15px 35px rgba(0,0,0,.3);
    }
    .fruit {
      position:absolute; width:50px; height:50px; display:flex; align-items:center; justify-content:center;
      font-size:2rem; cursor:pointer; transition:transform .1s ease;
      filter:drop-shadow(2px 2px 4px rgba(0,0,0,.2));
    }
    .fruit:active {transform:scale(.8);}
    .game-over-card {
      background:white; border-radius:20px; padding:30px;
      box-shadow:0 20px 60px rgba(0,0,0,.3);
      animation:fadeIn .3s ease;
    }
    .final-score {font-size:3rem; font-weight:900; color:#10b981;}
    .back-btn {
      position:absolute; top:20px; left:20px;
      background:#3b82f6; border:none; color:white;
      padding:10px 18px; border-radius:8px; cursor:pointer; font-weight:700;
      box-shadow:0 5px 15px rgba(0,0,0,.2);
    }
    .back-btn:hover {background:#2563eb;}
    audio {display:none;}
  </style>
</head>
<body>
  <div class="container">
    <!-- Home -->
    <div id="homeScreen" class="game-state active">
      <h1 style="color:white;font-size:3rem;margin-bottom:20px;">üçé Fruit Collector</h1>
      <p style="color:white;margin-bottom:25px;">Catch fruits before they fall! Click to score!</p>
      <button onclick="game.start()">Start Game</button>
    </div>

    <!-- Game -->
    <div id="gameScreen" class="game-state">
      <button class="back-btn" onclick="window.location.href='index.html'">üîô Orqaga</button>
      <div class="hud">
        <div class="hud-item">
          <div class="hud-label">Score</div>
          <div class="hud-value" id="scoreValue">0</div>
        </div>
        <div class="hud-item">
          <div class="hud-label">‚è±Ô∏è Time</div>
          <div class="hud-value" id="timerValue">30</div>
        </div>
      </div>
      <div class="game-canvas" id="gameCanvas">
        <div class="game-empty" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#9ca3af;">
          Click fruits as they fall!
        </div>
      </div>
    </div>

    <!-- Game Over -->
    <div id="gameOverScreen" class="game-state">
      <div class="game-over-card">
        <h2>üéÆ Game Over!</h2>
        <div>Final Score:</div>
        <div class="final-score" id="finalScore">0</div>
        <button onclick="game.start()">üîÑ Play Again</button><br><br>
        <button onclick="window.location.href='index.html'">üîô Orqaga</button>
      </div>
    </div>
  </div>

  <!-- Pop Sound -->
  <audio id="popSound" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_4d9b49b09e.mp3?filename=pop-94319.mp3"></audio>

  <script>
    const game = {
      score:0, timeLeft:30, speed:4, levelTime:10, fruits:[], fruitId:0,
      gameActive:false, timerId:null, spawnInterval:null, frameId:null,

      start(){
        this.reset();
        this.show('gameScreen');
        this.loop();
        this.spawn();
        this.timer();
      },

      reset(){
        this.score=0; this.timeLeft=30; this.speed=4; this.fruits=[];
        document.getElementById('scoreValue').textContent='0';
        document.getElementById('timerValue').textContent='30';
        const canvas=document.getElementById('gameCanvas');
        canvas.innerHTML='<div class="game-empty" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#9ca3af;">Click fruits as they fall!</div>';
        this.gameActive=true;
      },

      show(id){
        document.querySelectorAll('.game-state').forEach(s=>s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
      },

      spawn(){
        if(this.spawnInterval) clearInterval(this.spawnInterval);
        this.spawnInterval=setInterval(()=>{
          if(!this.gameActive) return;
          const types=['üçé','üçå','üçí','üçä'];
          const f=document.createElement('div');
          f.className='fruit';
          f.textContent=types[Math.floor(Math.random()*types.length)];
          const x=Math.random()*(document.getElementById('gameCanvas').clientWidth-50);
          f.style.left=x+'px'; f.style.top='-50px';
          f.addEventListener('pointerdown',()=>this.collect(f));
          document.getElementById('gameCanvas').appendChild(f);
          this.fruits.push({el:f,y:-50});
        },500);
      },

      loop(){
        if(this.frameId) cancelAnimationFrame(this.frameId);
        const update=()=>{
          if(!this.gameActive) return;
          const canvasH=document.getElementById('gameCanvas').clientHeight;
          this.fruits.forEach((f,i)=>{
            f.y+=this.speed;
            f.el.style.top=f.y+'px';
            if(f.y>canvasH){ f.el.remove(); this.fruits.splice(i,1); }
          });
          this.frameId=requestAnimationFrame(update);
        };
        update();
      },

      timer(){
        if(this.timerId) clearInterval(this.timerId);
        this.timerId=setInterval(()=>{
          this.timeLeft--;
          document.getElementById('timerValue').textContent=this.timeLeft;
          if(this.timeLeft%this.levelTime===0 && this.speed<10) this.speed+=1;
          if(this.timeLeft<=0) this.end();
        },1000);
      },

      collect(fruitEl){
        if(!this.gameActive) return;
        fruitEl.remove();
        document.getElementById('popSound').play();
        this.score+=10;
        document.getElementById('scoreValue').textContent=this.score;
      },

      end(){
        this.gameActive=false;
        clearInterval(this.timerId);
        clearInterval(this.spawnInterval);
        cancelAnimationFrame(this.frameId);
        this.fruits.forEach(f=>f.el.remove());
        this.fruits=[];
        document.getElementById('finalScore').textContent=this.score;
        this.show('gameOverScreen');
      }
    };
  </script>
</body>
</html>
